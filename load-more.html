<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/load-more.css" />
    <link rel="stylesheet" href="css/sidebar.css" />
    <title>Load More Javascript</title>
  </head>
  <body>
    <section id="main-load">
      <div id="side-bar">
        <a href="#" class="ic-close" onclick="closeSideBar()">&times;</a>
        <ul>
          <li><a href="./index.html">Home</a></li>
          <li><a href="./countdown.html">Countdown</a></li>
          <li><a href="./slideshow.html">Slideshow Image</a></li>
          <li>
            <a href="./content-loading.html">Content Loading Placeholder</a>
          </li>
          <li><a href="./load-more.html">Load More</a></li>
        </ul>
      </div>
      <a href="#" class="ic-open" onclick="openSideBar()">&#9776;</a>

      <h1>Load More Javascript</h1>
      <div id="container">
				<div class="list color7">Lorem ipsum dolor sit amet consectetur.</div>
				<div class="list color7">Lorem ipsum dolor sit amet consectetur.</div>
				<div class="list color7">Lorem ipsum dolor sit amet consectetur.</div>
				<div class="list color7">Lorem ipsum dolor sit amet consectetur.</div>
			</div>

      <div class="spinner">
        <div class="ball"></div>
        <div class="ball"></div>
        <div class="ball"></div>
      </div>
    </section>
  </body>

  <script>
    function openSideBar() {
      document.getElementById("side-bar").style.width = "40%";
    }

    function closeSideBar() {
      document.getElementById("side-bar").style.width = "0";
    }

    var container = document.getElementById("container");
    var loading = document.querySelector(".spinner");

    window.addEventListener("scroll", () => {
      const {
        scrollTop,
        scrollHeight,
        clientHeight,
      } = document.documentElement;

      console.log({ scrollTop, scrollHeight, clientHeight });

      if (clientHeight + scrollTop >= scrollHeight - 5) {
        showLoading();
      }
    });

    function showLoading() {
      loading.classList.add("show");

      setTimeout(getPost, 1000);
    }

    function getPost(data) {
      const postElement = document.createElement("div");
			postElement.classList.add("list");
      postElement.classList.add("color6");
      postElement.innerHTML = 'Lorem ipsum dolor sit amet consectetur.';
			
      container.appendChild(postElement);
      loading.classList.remove("show");
    }
  </script>
</html>
